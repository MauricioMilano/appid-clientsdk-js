<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>Home - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <h2><a href="index.html">Home</a></h2>
</nav>

<div id="main">
    

    



    


    <section class="package">
        <h3> </h3>		
    </section>









    



    <section class="readme">
        <article><p><a href="https://www.codacy.com/app/kajabfab/appid-clientsdk-js?utm_source=github.com&amp;utm_medium=referral&amp;utm_content=ibm-cloud-security/appid-clientsdk-js&amp;utm_campaign=Badge_Grade"><img src="https://api.codacy.com/project/badge/Grade/a30e7499a5234d3494508b7050975beb" alt="Codacy Badge"></a></p>
<h1>appid-clientsdk-js</h1>
<p>Client-side javascript SDK for the IBM Cloud App ID service.</p>
<h3>Table of Contents</h3>
<ul>
<li><a href="#installation">Installation</a></li>
<li><a href="#getting-started">Getting Started</a></li>
<li><a href="#api-reference">API Reference</a>
<ul>
<li><a href="#init">init</a></li>
<li><a href="#signin">signin</a></li>
<li><a href="#silentsignin">silentSignin</a></li>
<li><a href="#getuserinfo">getUserInfo</a></li>
</ul>
</li>
</ul>
<h2>Installation</h2>
<p>Using npm</p>
<pre class="prettyprint source lang-javascript"><code>npm install ibmcloud-appid-js
</code></pre>
<p>From the CDN:</p>
<pre class="prettyprint source lang-html"><code>&lt;script src=&quot;&quot;&quot;>&lt;/script>
</code></pre>
<p>Or, use the minified files in this repo:</p>
<pre class="prettyprint source lang-html"><code>&lt;script type='text/javascript' src=&quot;dist/appid.js&quot;>&lt;/script>
</code></pre>
<h2>Getting Started</h2>
<p>A simple sample application can be found in the <code>sample</code> folder in this repo.</p>
<p>You will need an <a href="https://www.ibm.com/cloud/app-id">IBM Cloud App ID</a> instance with a <code>singlepageapp</code> application created.
Use the <code>clientId</code> and <code>discoveryEndpoint</code> from the application credentials to initialize the <code>AppID</code> instance.</p>
<pre class="prettyprint source lang-javascript"><code>const appID = new AppID();
await appID.init({
    clientId: '&lt;SPA_CLIENT_ID>',
    discoveryEndpoint: '&lt;WELL_KNOWN_ENDPOINT>'
});
</code></pre>
<p>Using the signin() in your app to start authentication:</p>
<pre class="prettyprint source lang-javascript"><code>document.getElementById('login').addEventListener('click', async () => {
    try {
        const tokens = await appID.signin();
    } catch (e) {
        ...
    }
});
</code></pre>
<h2>API Reference</h2>
<h2>init</h2>
<p>Initialize AppID</p>
<h3>Parameters</h3>
<ul>
<li><code>options</code> <strong><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></strong>
<ul>
<li><code>options.clientId</code> <strong><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></strong> The clientId from the singlepageapp application credentials.</li>
<li><code>options.discoveryEndpoint</code> <strong><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></strong> The discoveryEndpoint from the singlepageapp application credentials.</li>
<li><code>options.popup</code> <strong><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></strong> The popup configuration. (optional, default <code>{height:screen.height*.80,width:400}</code>)
<ul>
<li><code>options.popup.height</code> <strong><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a></strong> The popup height.</li>
<li><code>options.popup.width</code> <strong><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a></strong> The popup width.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3>Example</h3>
<pre class="prettyprint source lang-javascript"><code>await appID.init({
	clientId: '&lt;SPA_CLIENT_ID>',
	discoveryEndpoint: '&lt;WELL_KNOWN_ENDPOINT>'
});
</code></pre>
<ul>
<li>Throws <strong>AppIDError</strong> For missing required params.</li>
<li>Throws <strong>RequestError</strong> Any errors during a HTTP request.</li>
</ul>
<p>Returns <strong><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a></strong></p>
<h2>signin</h2>
<p>This will open a login widget in a popup which will prompt the user to enter their credentials.
After a successful login, the popup will close and tokens are returned.</p>
<ul>
<li>Throws <strong>AppIDError</strong> AppIDError &quot;Popup closed&quot; - The user closed the popup before authentication was completed.</li>
<li>Throws <strong>TokenError</strong> Any token validation error.</li>
<li>Throws <strong>OAuthError</strong> Any errors from the server. e.g. {error: 'server_error', description: ''}</li>
<li>Throws <strong>RequestError</strong> Any errors during a HTTP request.</li>
</ul>
<p>Returns <strong><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a></strong> The tokens of the authenticated user or an error.
e.g. {accessToken: 'eyg...', accessTokenPayload: { iss: 'https...' }, idToken: 'eyg...', idTokenPayload: { email: 'example@gmail.com' }}</p>
<h2>silentSignin</h2>
<p>Silent sign in will attempt to authenticate the user in a hidden iframe.
Sign in will be successful only if there is a Cloud Directory SSO token in the browser.
You will need to enable SSO on the App ID dashboard.
Possible errors include:
User not signed in - there is no Cloud Directory SSO token</p>
<ul>
<li>Throws <strong>OAuthError</strong> Any errors from the server. e.g. {error: 'access_denied', description: 'User not signed in'}</li>
<li>Throws <strong>AppIDError</strong> &quot;Silent sign-in timed out&quot; - The iframe will close after 5 seconds if authentication could not be completed.</li>
<li>Throws <strong>TokenError</strong> Any token validation error.</li>
<li>Throws <strong>RequestError</strong> Any errors during a HTTP request.</li>
</ul>
<p>Returns <strong><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a></strong> The tokens of the authenticated user.
e.g. {accessToken: 'eyg...', accessTokenPayload: { iss: 'https...' }, idToken: 'eyg...', idTokenPayload: { email: 'example@gmail.com' }}</p>
<h2>getUserInfo</h2>
<p>This method will made a GET request to the user info endpoint using the access token of the authenticated user.</p>
<h3>Parameters</h3>
<ul>
<li>
<p><code>accessToken</code> <strong><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></strong> The App ID access token of the user</p>
</li>
<li>
<p>Throws <strong>AppIDError</strong> &quot;Access token must be a string&quot; - Invalid access token.</p>
</li>
<li>
<p>Throws <strong>RequestError</strong> Any errors during a HTTP request.</p>
</li>
</ul>
<p>Returns <strong><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a></strong> The user information for the authenticated user. e.g. {sub: '', email: ''}</p></article>
    </section>






    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.3</a> on Thu Sep 26 2019 16:50:54 GMT-0500 (Central Daylight Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>